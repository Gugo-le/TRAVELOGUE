<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRAVELOGUE - YOUR JOURNEY</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datamaps/0.5.9/datamaps.world.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;700&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<audio id="airport-ambient" loop src="audio/airport-bg.mp3"></audio>
<audio id="engine-sound" loop src="audio/jet-engine.mp3"></audio>
<audio id="takeoff-whoosh" src="audio/takeoff-whoosh.mp3"></audio>
<audio id="flip-sound" src="audio/flip-board.mp3"></audio>
<audio id="stamp-sound" src="audio/stamp-effect.mp3"></audio>
<audio id="tear-sound" src="audio/ticket-tear.mp3"></audio>
<audio id="airplane-bp" src="audio/airplane_bp.m4a"></audio>
<audio id="landing-sound" src="audio/landing.m4a"></audio>
<audio id="airplane-loop" loop src="audio/airplane.m4a"></audio>

<div id="intro-window">
    <div class="window-frame"><div class="window-glass"><div class="clouds"></div></div></div>
    <div class="intro-text-zone">
        <p class="terminal">TERMINAL 01 · GATE 24A</p>
        <p class="main-slogan">Focus 된 시선 위에서 흐르고, <br> 분위기로 기억되는 여행 지도</p>
        <div class="custom-form">
            <div class="input-group">
                <label>Passenger</label>
                <input type="text" id="input-name" placeholder="FAMILY NAME/LAST NAME" oninput="syncCustom()">
            </div>
            <div class="input-group">
                <label>From</label>
                <input type="text" id="input-from" placeholder="DEPARTING AIRPORT" oninput="syncCustom()">
            </div>
        </div>
        <div class="click-prompt" onclick="startJourney()">CHECK-IN NOW</div>
    </div>
</div>

<div id="loading-overlay">
    <div class="airplane-loading">✈</div>
    <p>TAKING OFF...</p>
</div>

<div id="main-content">
    <div id="subtitle-container">
        <div class="flip-board" id="flip-board"></div>
        <p class="subtitle-note">Travel, one page at a time.</p>
    </div>

    <div id="passport-btn" onclick="togglePassport()"></div>

    <div id="passport-overlay" onclick="togglePassport()">
        <button class="passport-nav prev" id="passport-prev" onclick="changePassportPage(-1); event.stopPropagation();" aria-label="Previous page">←</button>
        <div id="passport-summary" class="passport-summary" onclick="event.stopPropagation()"></div>
        <div class="passport-page" id="passport-page" onclick="event.stopPropagation()"></div>
        <button class="passport-nav next" id="passport-next" onclick="changePassportPage(1); event.stopPropagation();" aria-label="Next page">→</button>
    </div>

    <div id="boarding-pass-ui" onclick="handleTicketClick(event)">
        <div class="ticket-main">
            <div class="ticket-header">
                <div class="brand-box"><div class="brand">SKYLINE JOURNEY</div><div class="sub">ROK INTERNATIONAL</div></div>
                <div style="text-align:right;">
                    <div class="label" style="font-size:0.4rem; color:#bbb;">FLIGHT</div>
                    <div class="val" style="font-size:0.75rem; font-weight:bold;">TRV-2026</div>
                </div>
            </div>
            <div class="route">
                <div class="city-code" id="ticket-from-code">ICN</div>
                <div class="plane-path"></div>
                <div class="city-code" id="ticket-dest-code">---</div>
            </div>
            <div class="meta-grid">
                <div class="meta-item"><div class="label">Passenger</div><div class="val" id="ticket-name">---</div></div>
                <div class="meta-item"><div class="label">Date</div><input type="date" id="ticket-date" class="ticket-input"></div>
                <div class="meta-item"><div class="label">Seat</div><input type="text" id="ticket-seat" class="ticket-input" value="12A"></div>
                <div class="meta-item"><div class="label">Class</div>
                    <select id="ticket-class" class="ticket-input">
                        <option value="ECONOMY" selected>ECONOMY</option>
                        <option value="BUSINESS">BUSINESS</option>
                        <option value="FIRST">FIRST</option>
                    </select>
                </div>
            </div>
            <div id="visit-history" class="visit-history">FIRST VISIT</div>
        </div>
        <div class="ticket-stub">
            <div style="text-align:left;">
                <div class="label" style="color:#bbb;">BOARDING PASS</div>
                <div class="val" style="font-size:1.3rem; font-weight:800; margin-top:5px; color:var(--accent);">12A</div>
            </div>
            <div class="barcode"></div>
            <div style="font-size:0.45rem; color:#999; letter-spacing:1px; text-align:center;">#TRAVELOGUE_026</div>
        </div>
    </div>

    <button id="back-btn" onclick="resetMap()">← WORLD</button>
    <div class="hero-overlay" id="hero">
        <h1>TRAVELOGUE</h1>
        <p>WHERE TO NEXT?</p>
    </div>
    <div id="flight-status">FLIGHT TRV-2026 · BOARDING · 12A</div>
    <div id="event-hud" aria-hidden="true">
        <div class="event-row">
            <div class="boarding-anim">BOARDING<span class="dots"><span>.</span><span>.</span><span>.</span></span></div>
            <div class="status-stamp" id="status-stamp">BOARDING</div>
        </div>
        <div class="progress-line">
            <span class="code" id="hud-from">ICN</span>
            <span class="line"></span>
            <span class="code" id="hud-to">---</span>
        </div>
        <div class="timeline" id="timeline">
            <span class="step" data-step="checkin">CHECK-IN</span>
            <span class="step" data-step="boarding">BOARDING</span>
            <span class="step" data-step="taxi">TAXI</span>
            <span class="step" data-step="takeoff">TAKEOFF</span>
        </div>
        <div class="countdown">GATE 24A · <span id="countdown">T-00:23</span></div>
    </div>
    <div id="map-wrapper"></div>
</div>

<div id="album-overlay">
    <button class="close-album-btn" onclick="closeAlbum()">CLOSE</button>
    <div id="fragment-zone"></div>
    <div class="upload-zone">
        <label for="file-input" class="upload-button">UPLOAD PHOTO</label>
        <input type="file" id="file-input" accept="image/*" multiple onchange="handleFileSelect(event)" style="display:none;">
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
