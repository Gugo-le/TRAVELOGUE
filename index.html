<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRAVELOGUE - 여행을 시작하는 순간의 설렘</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datamaps/0.5.9/datamaps.world.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;700&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="assets/favicon/favicon.svg">
    <link rel="alternate icon" type="image/png" href="assets/favicon/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <meta name="theme-color" content="#ffffff">
</head>
<body>

<audio id="stamp-sound" src="assets/audio/takeoff.m4a"></audio>
<audio id="airplane-bp" src="assets/audio/airplane_bp.m4a"></audio>
<audio id="landing-sound" src="assets/audio/landing.m4a"></audio>
<audio id="airplane-loop" loop src="assets/audio/airplane.m4a"></audio>
<audio id="soundscape-audio" loop></audio>

<div id="intro-window" style="display: none;">
    <div class="window-frame"><div class="window-glass"><div class="clouds"></div></div></div>
    <div class="intro-text-zone">
        <p class="terminal">TERMINAL 01 · GATE 24A</p>
        <p class="main-slogan">Focus 된 시선 위에서 흐르고, <br> 분위기로 기억되는 여행 지도</p>
        <div class="custom-form">
            <div class="input-group">
                <label>Passenger</label>
                <input type="text" id="input-name" placeholder="FAMILY NAME/LAST NAME" oninput="syncCustom()">
            </div>
            <div class="input-group">
                <label>From</label>
                <input type="text" id="input-from" placeholder="DEPARTING AIRPORT" oninput="syncCustom()">
            </div>
        </div>
        <div class="click-prompt" onclick="startJourney()">CHECK-IN NOW</div>
    </div>
</div>

<div id="main-content" class="active">
    <div id="subtitle-container">
        <div class="flip-board" id="flip-board"></div>
    </div>
    <div id="journey-summary" aria-hidden="true">
        <div class="summary-header">
            <span class="tag">TRAVELOGUE</span>
            <span>JOURNEY STATS</span>
        </div>
        <div class="journey-summary-body">
            <div class="journey-summary-row"><span class="label">TRIPS</span><span class="value" id="journey-summary-trips">0</span></div>
            <div class="journey-summary-row"><span class="label">TOP</span><span class="value" id="journey-summary-top">---</span></div>
            <div class="journey-summary-row"><span class="label">DIST</span><span class="value" id="journey-summary-dist">0 KM</span></div>
            <div class="journey-summary-row"><span class="label">AVG</span><span class="value" id="journey-summary-avg">0 KM</span></div>
        </div>
    </div>

    <div id="passport-btn" onclick="togglePassport()"></div>

    <div id="passport-overlay" onclick="togglePassport()">
        <button class="passport-nav prev" id="passport-prev" onclick="changePassportPage(-1); event.stopPropagation();" aria-label="Previous page">←</button>
        <div id="passport-summary" class="passport-summary" onclick="event.stopPropagation()"></div>
        <div class="passport-page" id="passport-page" onclick="event.stopPropagation()"></div>
        <button class="passport-nav next" id="passport-next" onclick="changePassportPage(1); event.stopPropagation();" aria-label="Next page">→</button>
    </div>

    <div id="boarding-pass-ui" onclick="handleTicketClick(event)">
        <div class="ticket-main">
            <div class="ticket-header">
                <div class="brand-box"><div class="brand">TRAVELOGUE JOURNEY</div><div class="sub">ROK INTERNATIONAL</div></div>
                <div class="ticket-flight">
                    <div class="ticket-flight-label">FLIGHT</div>
                    <div class="ticket-flight-code">TRV-2026</div>
                </div>
            </div>
            <div class="route" id="route-line">
                <input class="city-code city-code-input" id="ticket-from-code" list="airport-list-all" value="ICN" maxlength="3" aria-label="From airport" autocapitalize="characters" spellcheck="false">
                <div class="plane-path"></div>
                <input class="city-code city-code-input" id="ticket-dest-code" list="airport-list-dest" placeholder="---" maxlength="3" aria-label="To airport" autocapitalize="characters" spellcheck="false">
            </div>
            <datalist id="airport-list-all"></datalist>
            <datalist id="airport-list-dest"></datalist>
            <div class="meta-grid">
                <div class="meta-item"><div class="label">Passenger</div><div class="val" id="ticket-name">---</div></div>
                <div class="meta-item"><div class="label">Date</div><input type="text" id="ticket-date" class="ticket-input" placeholder="YYYY-MM-DD" autocomplete="off" inputmode="none" readonly></div>
                <div class="meta-item"><div class="label">Seat</div><input type="text" id="ticket-seat" class="ticket-input" value="12A"></div>
                <div class="meta-item"><div class="label">Class</div>
                    <select id="ticket-class" class="ticket-input">
                        <option value="ECONOMY" selected>ECONOMY</option>
                        <option value="BUSINESS">BUSINESS</option>
                        <option value="FIRST">FIRST</option>
                    </select>
                </div>
            </div>
            <div id="visit-history" class="visit-history">FIRST VISIT</div>
        </div>
        <div class="ticket-stub">
            <div class="ticket-stub-header">
                <div class="ticket-stub-label">BOARDING PASS</div>
                <div class="ticket-stub-seat" id="ticket-seat-stub">12A</div>
            </div>
            <div class="barcode"></div>
            <div class="ticket-stub-hash">#TRAVELOGUE_026</div>
        </div>
    </div>

    <button id="back-btn" onclick="resetMap()">← WORLD</button>
    <div id="map-mode-toggle" role="group" aria-label="Map view">
        <button type="button" class="map-mode-btn" data-mode="flat" aria-pressed="true">FLAT</button>
        <button type="button" class="map-mode-btn" data-mode="globe" aria-pressed="false">GLOBE</button>
    </div>
    <div class="hero-overlay" id="hero">
        <h1>TRAVELOGUE</h1>
        <p>WHERE TO NEXT?</p>
    </div>
    <div id="flight-status">FLIGHT TRV-2026 · BOARDING · 12A</div>
    <div id="event-hud" aria-hidden="true">
        <div class="event-row">
            <div class="boarding-anim">BOARDING<span class="dots"><span>.</span><span>.</span><span>.</span></span></div>
            <div class="status-stamp" id="status-stamp">BOARDING</div>
        </div>
        <div class="progress-line">
            <span class="code" id="hud-from">ICN</span>
            <span class="line"></span>
            <span class="code" id="hud-to">---</span>
        </div>
        <div class="timeline" id="timeline">
            <span class="step" data-step="checkin">CHECK-IN</span>
            <span class="step" data-step="boarding">BOARDING</span>
            <span class="step" data-step="taxi">TAXI</span>
            <span class="step" data-step="takeoff">TAKEOFF</span>
        </div>
        <div class="countdown">GATE 24A · <span id="countdown">T-00:23</span></div>
    </div>
    <div id="map-wrapper"></div>
</div>

<!-- Bottom Navigation Bar -->
<nav id="bottom-nav" class="bottom-nav">
    <a href="index.html" class="nav-item active" data-page="home" title="Home">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span class="nav-label">Home</span>
    </a>
    <a href="search.html" class="nav-item" data-page="search" title="Search">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span class="nav-label">Search</span>
    </a>
    <a href="chat.html" class="nav-item" data-page="chat" title="Chat">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <span class="nav-label">Chat</span>
    </a>
    <a href="profile.html" class="nav-item" data-page="profile" title="Profile">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span class="nav-label">Profile</span>
    </a>
</nav>

<script src="./js/data.js"></script>
<script src="./js/state.js"></script>
<script src="./js/utils.js"></script>
<script src="./js/audio.js"></script>
<script src="./js/ui.js"></script>
<script src="./js/map.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/script.js"></script>
</body>
</html>
